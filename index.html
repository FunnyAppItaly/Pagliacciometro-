<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Pagliacciometro Gioco</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {margin:0; background:#111; font-family:Arial,sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; color:white;}
.app {width:360px; background:#222; border-radius:24px; padding:16px; box-shadow:0 0 40px rgba(255,0,0,.5); text-align:center; position:relative;}
h3 {margin-top:0; color:#ff3d3d;}
#radar {width:260px; height:260px; margin:14px auto; border-radius:50%; background:radial-gradient(circle,#333 40%,#111 75%),repeating-radial-gradient(circle,rgba(255,0,0,.1) 0 2px,transparent 2px 20px); position:relative; overflow:hidden;}
#line {position:absolute; width:50%; height:3px; background:red; top:50%; left:50%; transform-origin:left center; box-shadow:0 0 10px red;}
.clown {width:14px; height:14px; border-radius:50%; position:absolute; box-shadow:0 0 12px #ff2d2d;}
button {width:100%; padding:12px; border-radius:20px; border:none; background:#ff2d2d; color:white; font-size:16px; margin-top:12px; cursor:pointer;}
#status {margin-top:12px; min-height:40px; font-weight:bold;}
.meter {height:16px; background:#333; border-radius:10px; overflow:hidden; margin:12px 0;}
.fill {height:100%; width:0%; background:green; transition:all .4s;}
</style>
</head>
<body>
<div class="app">
  <h3>ðŸ§­ Pagliacciometro</h3>
  <div id="radar">
    <div id="line"></div>
  </div>
  <div class="meter"><div class="fill" id="fill"></div></div>
  <button onclick="scan()">SCANSIONA AREA</button>
  <div id="status"></div>
</div>

<audio id="bip1" src="https://www.soundjay.com/button/sounds/button-3.mp3"></audio>
<audio id="bip2" src="https://www.soundjay.com/button/sounds/button-10.mp3"></audio>
<audio id="alarm" src="https://www.soundjay.com/misc/sounds/alarm-clock-1.mp3"></audio>

<script>
const radar = document.getElementById("radar");
const line = document.getElementById("line");
const status = document.getElementById("status");
const fill = document.getElementById("fill");
const bip1 = document.getElementById("bip1");
const bip2 = document.getElementById("bip2");
const alarm = document.getElementById("alarm");

const phrases = [
  "Sorriso e red flag, combo letale",
  "Troppo carino per essere vero, infattiâ€¦",
  "Radar attento, il clown Ã¨ vicino",
  "Bip bipâ€¦ attenzione alla pagliacceria!",
  "Segnale rosso: circo in arrivo!"
];

// Bussola simulata (ruota piano piano)
let angle = 0;
setInterval(()=>{angle+=2; line.style.transform=`rotate(${angle}deg)`;}, 100);

// Crea puntini rossi
function createClowns(count){
  document.querySelectorAll(".clown").forEach(c=>c.remove());
  for(let i=0;i<count;i++){
    let a = Math.random()*360;
    let rad = a*Math.PI/180;
    let d = 90+Math.random()*50;
    let x = 130 + Math.cos(rad)*d;
    let y = 130 + Math.sin(rad)*d;
    let c = document.createElement("div");
    c.className="clown";
    c.style.left=x+"px";
    c.style.top=y+"px";
    radar.appendChild(c);
  }
}

// Funzione principale
function scan(){
  // Livello di pagliacceria casuale
  let level = Math.floor(Math.random()*101);
  fill.style.width = level+"%";
  fill.style.background = level<40?"green":level<70?"orange":"red";

  // Bip in base al livello
  if(level<40) bip1.play();
  else if(level<70) bip2.play();
  else alarm.play();

  // Numero di puntini proporzionale al livello
  let count = 3 + Math.floor(level/10);
  createClowns(count);

  // Frase casuale
  status.innerText = phrases[Math.floor(Math.random()*phrases.length)];
}
</script>
</body>
</html>
